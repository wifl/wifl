<div>
<p>The model describes RESTful resources.</p>

<p class="appl commentary">The example application has a 
<span class="rname">store</span> resource, a single 
<span class="rname">products</span>
collection resource and a <span class="rname">product</span>
item resource for each product.
</p>

<p>A resource's location is specified by a URI template.  The template
syntax is defined in <a href="http://tools.ietf.org/html/rfc6570">RFC 6570</a>.
It accommodates parameters in the URI's path and in its query string.</p>

<p class="appl commentary">The <span class="rname">store</span> resource's
URI template is <span class="uri-template">http://store.example.com/rest</span>.
The <span class="rname">products</span> resource's 
URI template is <span class="uri-template">/products</span>.
The <span class="rname">product</span> URI template is
<span class="uri-template">/{id}</span>.</p>

<p>A resource may have a single parent resource whose URI template is a
prefix to its own.</p>

<p class="appl commentary">The <span class="rname">product</span> resource's
parent is <span class="rname">products</span>, whose parent resource is
<span class="rname">store</span>.
To indicate this, <span class="rname">product</span>'s 
<span class="rprop">parent</span> property is set to
<span class="rname">products</span>, and <span class="rname">products</span>
<span class="rprop">parent</span> property is set to
<span class="rname">store</span>.
Given these relationships and the model's rules, 
the <span class="rname">product</span>'s complete URI template is composed
by combining the URI templates of <span class="rname">store</span>,
<span class="rname">products</span>, and <span class="rname">product</span>
resulting in
<span class="uri-template">http://store.example.com/rest/products/{id}</span>. 
</p>

<p>A resource may support a number of requests.
A request has a required HTTP method, e.g. GET or POST.</p>

<p class="appl commentary">The <span class="rname">products</span> resource 
has two requests: <span class="rname">products_GET</span> and
<span class="rname">products_POST</span>, for the GET and POST methods, 
respectively.
The <span class="rname">product</span> resource has three requests:
<span class="rname">product_GET</span>, <span class="rname">product_PUT</span>,
and <span class="rname">product_DELETE</span>.</p>

<p>A resource may specify a number of responses that are common to all its
requests.</p>

<p class="appl commentary">The <span class="rname">product</span> resource
requires the product id as a path parameter.  If the product id does not
exist, the <span class="rname">product_404</span> response is returned
regardless of whether the request's HTTP method was GET, POST, or PUT.</p>

<p>A request may have parameters.  A parameter may appear in the
HTTP request's URI's path or its query string, or in an HTTP request header.</p>

<p class="appl commentary">The <span class="rname">products_GET</span>
request has two query parameters: <span class="rname">start_index</span>
and <span class="rname">max_results</span>.</p>

<p>A request may also specify zero or more logically equivalent representations.
For instance, a POST or PUT request might accept XML or JSON content.
A request's representation is carried in the HTTP request's message body.</p>

<p class="appl commentary">The <span class="rname">products_POST</span>
request's representation is a <span class="rname">product_JSON</span>,
as is the representation of the <span class="rname">product_PUT</span> 
request.</p>

<p>A request may specify a number of expected responses.
A response indicates its HTTP status codes.
A response may also specify zero or more logically equivalent representations.
For example, a response may return an XML or a JSON representation depending
on the value of a request parameter.
A response's representation is carried in the HTTP response's message body.</p>

<p class="appl commentary">The <span class="rname">products_POST</span> request has
two responses: <span class="rname">products_POST_201</span> indicating
success, and <span class="rname">products_POST_400</span> when the 
submitted representation fails schema validation.
The <span class="rname">products_POST_201</span> has a status code of 200
and a representation of <span class="rname">product_JSON</span>.
The <span class="rname">products_POST_400</span> has a status code of 400
and no representation.</p>

<p class="appl commentary">The <span class="rname">product_GET</span> request has two
responses: <span class="rname">product_GET_200</span> for the success case,
and <span class="rname">product_GET_404</span> for the not found case.
The <span class="rname">product_GET_200</span> response's status code is 200
and its representation is <span class="rname">product_JSON</span>.
The <span class="rname">product_GET_404</span> response's status code is 404
and it does not have a representation.</p>

<p>A response may specify more than one HTTP status code when they share a set of
representations.
A response may optionally have parameters contained in HTTP response headers.</p>

<p>A representation specifies metadata about an HTTP request's or response's 
message body.  A representation must indicate the content type that is 
conveyed in the <span class="header">Content-Type</span> header.
A representation may optionally indicate the URI of a schema for the message body.
The URI may be that of an XML schema, a JSON schema, or a schema or grammar
in another specification language.</p>

<p class="appl commentary">The <span class="rname">product_JSON</span>
representation has a content type of <span class="rvalue">application/json</span>.</p>

<p>A parameter is required to have a name.
It may specify a type defining the parameter's legal values, 
whether the parameter is required, and a default value for the parameter.</p>

<p class="appl commentary">The <span class="rname">start_index</span> 
parameter's name is <span class="rvalue">start-index</span>, it must
be a non-negative integer, and is optional with a default value of 1.
The <span class="rname">max_results</span> parameter's name is
<span class="rvalue">max-results</span>.  It is also a non-negative
integer, and optional with a default value of 10.</p>

<p>To accommodate parameters that are common to a number of resources or requests,
the model supports parameter inheritance.  
A resource inherits parameters from its super-resource, i.e. the target of
its <span class="rprop">super</span> property.
A request inherits parameters from its resource, including those inherited
by the resource.  For example, if all requests are required to include an
API key in the query string, a new resource may be identified as the
super-resource of all resources.  The super-resource will specify the API key as
a required query parameter, eliminating the need to specify it for each
request.</p>

<p class="appl commentary">When the store developers decided to add the 
API key to all requests, they created the <span class="rname">store</span> 
resource to define an abstract resource type, which has a required 
query parameter <span class="rname">API_key</span> whose name is
<span class="rvalue">apikey</span>.  Each resource specifies the 
<span class="rname">Store</span> resource as a 
<span class="rprop">super</span> resource to inherit its query parameters.
The requests of each resource are then required to
include the <span class="rvalue">apikey</span> query parameter.</p>

<p>As another example, consider a resource that is a specific instance in
a collection.  The instance resource's URI must include the instance's
identifier as a path parameter for any request to get
a representation with a GET, to update it with a PUT, or to DELETE it.
The resource specifies a path parameter for the instance's identifier and
includes the parameter's name in the resource's URI template.</p>

<p class="appl commentary">The <span class="rname">product</span> resource 
has a required path parameter, <span class="rname">product_ID</span>, which applies 
to all its requests, and is referred to in the resource's URI template.</p>

<p>The model of the online store's resources and their relationships is 
shown below.</p>

<img class="umlgraph" src="images/Store.png" alt="Online store application's resources and relationships" />
</div>
